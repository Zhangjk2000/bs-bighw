{"remainingRequest":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\BS\\annotate-system\\frontend\\src\\store\\modules\\user.js","dependencies":[{"path":"F:\\BS\\annotate-system\\frontend\\src\\store\\modules\\user.js","mtime":1639627257272},{"path":"F:\\BS\\annotate-system\\frontend\\babel.config.js","mtime":1639627257111},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639628022585},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639628024341},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1639628021347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGdldEluZm9BcGksIGxvZ2luQXBpLCBsb2dvdXRBcGksIHJlZ2lzdGVyQXBpIH0gZnJvbSAiQC9hcGkvdXNlciI7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgeyBnZXRUb2tlbiwgcmVtb3ZlVG9rZW4sIHNldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKdmFyIHN0YXRlID0gewogIHRva2VuOiBnZXRUb2tlbigpLAogIG5hbWU6ICIiLAogIGF2YXRhcjogIiIsCiAgcm9sZXM6IFtdLAogIC8vIOaJgOacieeahOagh+azqOaWh+acrAogIGFubm90YXRlVGV4dExpc3Q6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgLy90b2tlbgogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIC8v55So5oi35ZCNCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIC8v5aS05YOPCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXIgIT09IG51bGwgJiYgYXZhdGFyICE9PSB2b2lkIDAgPyBhdmF0YXIgOiAiaHR0cHM6Ly93LndhbGxoYXZlbi5jYy9mdWxsL25yL3dhbGxoYXZlbi1ucmpneTcuanBnIjsKICB9LAogIC8v6KeS6Imy77yM55So5LqO5p2D6Ym0CiAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogIH0sCgogIC8qKg0KICAgICAqIOiuvue9ruaJgOacieeahOagh+azqOaWh+acrA0KICAgICAqLwogIFNFVF9BTk5PVEFURV9URVhUX0xJU1Q6IGZ1bmN0aW9uIFNFVF9BTk5PVEFURV9URVhUX0xJU1Qoc3RhdGUsIGFubm90YXRlVGV4dExpc3QpIHsKICAgIC8vIFRPRE8g5pqC5pe26L+Z5qC35re75YqgLOetieaVsOaNruW6k+WujOWWhOWQjuWGjeabtOaUuQogICAgc3RhdGUuYW5ub3RhdGVUZXh0TGlzdCA9IGFubm90YXRlVGV4dExpc3Q7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDnlKjmiLfnmbvlvZUKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBsb2dpbkFwaSh7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDms6jlhowKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjIsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJlZ2lzdGVyQXBpKHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsIGRhdGEudG9rZW4pOwogICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBnZXRJbmZvQXBpKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmVqZWN0KCLpqozor4HlpLHotKXvvIzor7flho3mrKHnmbvlvZXjgIIiKTsKICAgICAgICB9CgogICAgICAgIHZhciByb2xlcyA9IGRhdGEucm9sZXMsCiAgICAgICAgICAgIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyLAogICAgICAgICAgICBhbm5vdGF0ZV90ZXh0X2xpc3QgPSBkYXRhLmFubm90YXRlX3RleHRfbGlzdDsgLy8g6KeS6Imy5b+F6aG75piv6Z2e56m65pWw57uECgogICAgICAgIGlmICghcm9sZXMgfHwgcm9sZXMubGVuZ3RoIDw9IDApIHsKICAgICAgICAgIHJlamVjdCgiZ2V0SW5mb++8muinkuiJsuW/hemhu+aYr+mdnuepuuaVsOe7hO+8gSIpOwogICAgICAgIH0KCiAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCByb2xlcyk7CiAgICAgICAgY29tbWl0KCJTRVRfTkFNRSIsIG5hbWUpOwogICAgICAgIGNvbW1pdCgiU0VUX0FWQVRBUiIsIGF2YXRhcik7CiAgICAgICAgY29tbWl0KCJTRVRfQU5OT1RBVEVfVEVYVF9MSVNUIiwgYW5ub3RhdGVfdGV4dF9saXN0KTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g55So5oi35rOo6ZSACiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGxvZ291dEFwaShzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCAiIik7CiAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCBbXSk7CiAgICAgICAgY29tbWl0KCJTRVRfQVZBVEFSIiwgIiIpOwogICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDliKDpmaTku6TniYwKICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICBjb21taXQoIlNFVF9ST0xFUyIsIFtdKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyDorr7nva7lpLTlg48KICBzZXRBdmF0YXI6IGZ1bmN0aW9uIHNldEF2YXRhcihfcmVmNiwgYXZhdGFyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgY29tbWl0KCJTRVRfQVZBVEFSIiwgYXZhdGFyKTsKICB9LAogIC8vIOiuvue9rueUqOaIt+WQjQogIHNldE5hbWU6IGZ1bmN0aW9uIHNldE5hbWUoX3JlZjcsIG5hbWUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQ7CiAgICBjb21taXQoIlNFVF9OQU1FIiwgbmFtZSk7CiAgfSwKICBzZXRBbm5vdGF0ZVRleHRMaXN0OiBmdW5jdGlvbiBzZXRBbm5vdGF0ZVRleHRMaXN0KF9yZWY4LCB0ZXh0TGlzdCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKICAgIGNvbW1pdCgiU0VUX0FOTk9UQVRFX1RFWFRfTElTVCIsIHRleHRMaXN0KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["F:/BS/annotate-system/frontend/src/store/modules/user.js"],"names":["getInfoApi","loginApi","logoutApi","registerApi","resetRouter","getToken","removeToken","setToken","state","token","name","avatar","roles","annotateTextList","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_ANNOTATE_TEXT_LIST","actions","login","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","data","catch","error","register","getInfo","annotate_text_list","length","logout","resetToken","setAvatar","setName","setAnnotateTextList","textList","namespaced"],"mappings":"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","sourcesContent":["import { getInfoApi, loginApi, logoutApi, registerApi } from \"@/api/user\";\r\nimport { resetRouter } from \"@/router\";\r\nimport { getToken, removeToken, setToken } from \"@/utils/auth\";\r\n\r\nconst state = {\r\n  token: getToken(),\r\n  name: \"\",\r\n  avatar: \"\",\r\n  roles: [],\r\n  // 所有的标注文本\r\n  annotateTextList: [],\r\n};\r\n\r\nconst mutations = {\r\n  //token\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token;\r\n  },\r\n  //用户名\r\n  SET_NAME: (state, name) => {\r\n    state.name = name;\r\n  },\r\n  //头像\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar =\r\n            avatar ?? \"https://w.wallhaven.cc/full/nr/wallhaven-nrjgy7.jpg\";\r\n  },\r\n  //角色，用于权鉴\r\n  SET_ROLES: (state, roles) => {\r\n    state.roles = roles;\r\n  },\r\n  /**\r\n     * 设置所有的标注文本\r\n     */\r\n  SET_ANNOTATE_TEXT_LIST: (state, annotateTextList) => {\r\n    // TODO 暂时这样添加,等数据库完善后再更改\r\n\r\n    state.annotateTextList = annotateTextList;\r\n  },\r\n};\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  login({ commit }, userInfo) {\r\n    const { username, password } = userInfo;\r\n    return new Promise((resolve, reject) => {\r\n      loginApi({ username: username.trim(), password: password })\r\n        .then((response) => {\r\n          const { data } = response;\r\n          commit(\"SET_TOKEN\", data.token);\r\n          setToken(data.token);\r\n\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  },\r\n  // 注册\r\n  register({ commit }, userInfo) {\r\n    const { username, password } = userInfo;\r\n    return new Promise((resolve, reject) => {\r\n      registerApi({ username: username.trim(), password: password })\r\n        .then((response) => {\r\n          const { data } = response;\r\n          commit(\"SET_TOKEN\", data.token);\r\n          setToken(data.token);\r\n\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  },\r\n\r\n  // 获取用户信息\r\n  getInfo({ commit }) {\r\n    return new Promise((resolve, reject) => {\r\n      getInfoApi()\r\n        .then((response) => {\r\n          const { data } = response;\r\n\r\n          if (!data) {\r\n            reject(\"验证失败，请再次登录。\");\r\n          }\r\n\r\n          const { roles, name, avatar, annotate_text_list } = data;\r\n\r\n          // 角色必须是非空数组\r\n          if (!roles || roles.length <= 0) {\r\n            reject(\"getInfo：角色必须是非空数组！\");\r\n          }\r\n\r\n          commit(\"SET_ROLES\", roles);\r\n          commit(\"SET_NAME\", name);\r\n          commit(\"SET_AVATAR\", avatar);\r\n\r\n          commit(\"SET_ANNOTATE_TEXT_LIST\", annotate_text_list);\r\n          resolve(data);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  },\r\n\r\n  // 用户注销\r\n  logout({ commit, state }) {\r\n    return new Promise((resolve, reject) => {\r\n      logoutApi(state.token)\r\n        .then(() => {\r\n          commit(\"SET_TOKEN\", \"\");\r\n          commit(\"SET_ROLES\", []);\r\n          commit(\"SET_AVATAR\", \"\");\r\n          removeToken();\r\n          resetRouter();\r\n\r\n          resolve();\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    });\r\n  },\r\n\r\n  // 删除令牌\r\n  resetToken({ commit }) {\r\n    return new Promise((resolve) => {\r\n      commit(\"SET_TOKEN\", \"\");\r\n      commit(\"SET_ROLES\", []);\r\n      removeToken();\r\n      resolve();\r\n    });\r\n  },\r\n  // 设置头像\r\n  setAvatar({ commit }, avatar) {\r\n    commit(\"SET_AVATAR\", avatar);\r\n  },\r\n  // 设置用户名\r\n  setName({ commit }, name) {\r\n    commit(\"SET_NAME\", name);\r\n  },\r\n  setAnnotateTextList({ commit }, textList) {\r\n    commit(\"SET_ANNOTATE_TEXT_LIST\", textList);\r\n  },\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n};\r\n"]}]}