{"remainingRequest":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\BS\\annotate-system\\frontend\\src\\utils\\annotateUtils.js","dependencies":[{"path":"F:\\BS\\annotate-system\\frontend\\src\\utils\\annotateUtils.js","mtime":1639627257278},{"path":"F:\\BS\\annotate-system\\frontend\\babel.config.js","mtime":1639627257111},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639628022585},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639628024341},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1639628021347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOlxcQlNcXGFubm90YXRlLXN5c3RlbVxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXHRvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUvaW5kZXgiOyAvL2ltcG9ydCB7IHNvbWUgfSBmcm9tICJjb3JlLWpzL2NvcmUvYXJyYXkiOwoKLyoqDQogKiAg5oyJ6ZKu5qC35byPDQogKi8KCmZ1bmN0aW9uIGJ1dHRvblN0eWxlKCkgewogIHJldHVybiAiY3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6NXB4IjsKfQovKioNCiAqDQogKiAg6L+U5Zue5qCH5rOo5paH5pys5qC35byPDQogKiBAcGFyYW0ge251bWJlcn0gaW5kZXgg5qCH5rOo6aKc6Imy57Si5byVDQogKi8KCgpmdW5jdGlvbiB0ZXh0U3R5bGUoaW5kZXgpIHsKICByZXR1cm4gImJvcmRlcjo1cHggc29saWQgIi5jb25jYXQoc3RvcmUuc3RhdGUuYW5ub3RhdGUubGFiZWxzW2luZGV4XS5jb2xvciwgIjtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiIpLmNvbmNhdChzdG9yZS5zdGF0ZS5hbm5vdGF0ZS5sYWJlbHNbaW5kZXhdLmNvbG9yLCAiO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7Iik7Cn0KLyoqDQogKg0KICogIOWFs+ezu+agh+azqA0KICovCgoKZXhwb3J0IGZ1bmN0aW9uIHJlbGF0aW9uQW5ub3RhdGVVdGlsKGlkLCBvcmRlcikgewogIHZhciB0ZXh0ID0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7IC8vIOaMiemSruagt+W8jwogIC8vIFRPRE/vvJrmoLflvI/nvo7ljJYKICAvLyDmoIfms6jmlofmnKzmoLflvI8KCiAgdmFyIGFubm90YXRlZFRlc3RTdHlsZSA9ICJib3JkZXI6NXB4IHNvbGlkICNBM0I5RDk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojQTNCOUQ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7IjsgLy8g6YCJ5Lit5LiN5Li656m6CgogIGlmICh0ZXh0Lmxlbmd0aCA+IDApIHsKICAgIC8vIOiOt+WPlui1t+Wni+e0ouW8leWSjOe7k+adn+e0ouW8lQogICAgdmFyIGFubm90YXRlQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhbm5vdGF0ZUNvbnRlbnQiKTsKICAgIHZhciByYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApOwogICAgdmFyIHByZVNlbGVjdGlvblJhbmdlID0gcmFuZ2UuY2xvbmVSYW5nZSgpOwogICAgcHJlU2VsZWN0aW9uUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGFubm90YXRlQ29udGVudCk7CiAgICBwcmVTZWxlY3Rpb25SYW5nZS5zZXRFbmQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0KTsKICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgc3Bhbi5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgYW5ub3RhdGVkVGVzdFN0eWxlKTsKICAgIGlmIChvcmRlcikgc3Bhbi5zZXRBdHRyaWJ1dGUoImlkIiwgdG9TdHJpbmcoaWRbMV0pICsgInNlY29uZCIpO2Vsc2Ugc3Bhbi5zZXRBdHRyaWJ1dGUoImlkIiwgdG9TdHJpbmcoaWRbMF0pICsgImZpcnN0Iik7CiAgICB2YXIgVGV4dFJhbmdlID0gd2luZG93LmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCk7CiAgICBUZXh0UmFuZ2Uuc3Vycm91bmRDb250ZW50cyhzcGFuKTsgLy9zcGFuLmFwcGVuZENoaWxkKGJ1dHRvbik7CiAgICAvL+enu+mZpOmAieS4reeKtuaAge+8jOWQpuWImeW+iOmavueciwoKICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTsgLy9zdG9yZS5zdGF0ZS5hbm5vdGF0ZS5pZCsrOwogIH0KfSAvLyDkuKTmrrXmoIfms6jmlofmnKzkuYvpl7Tov57nur8KCmV4cG9ydCBmdW5jdGlvbiByZWxhdGlvbk1hdGNoaW5nVXRpbChwb3NpdGlvbjEsIHBvc2l0aW9uMiwgaWQpIHsKICB2YXIgZHJhdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogIGNvbnNvbGUubG9nKHBvc2l0aW9uMSk7CiAgY29uc29sZS5sb2cocG9zaXRpb24yKTsKICB2YXIgcG9zWG1pbiwgcG9zWW1pbjsKICBpZiAocG9zaXRpb24xWzBdIDw9IHBvc2l0aW9uMlswXSkgcG9zWG1pbiA9IHBvc2l0aW9uMVswXTtlbHNlIHBvc1htaW4gPSBwb3NpdGlvbjJbMF07CiAgaWYgKHBvc2l0aW9uMVsxXSA8PSBwb3NpdGlvbjJbMV0pIHBvc1ltaW4gPSBwb3NpdGlvbjFbMV07ZWxzZSBwb3NZbWluID0gcG9zaXRpb24yWzFdOwogIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG9TdHJpbmcoaWRbMF0pICsgImZpcnN0Iik7CiAgY29uc29sZS5sb2cobm9kZSk7CiAgbm9kZS5hcHBlbmRDaGlsZChkcmF3KTsKICBkcmF3LnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKICBkcmF3LnN0eWxlLnpJbmRleCA9IDU7CiAgZHJhdy5zdHlsZS5sZWZ0ID0gIjBweCI7CiAgZHJhdy5zdHlsZS50b3AgPSAiMHB4IjsKICBkcmF3LnN0eWxlLndpZHRoID0gIiIuY29uY2F0KHBvc2l0aW9uMlswXSArIHBvc2l0aW9uMVswXSAtIDIgKiBwb3NYbWluLCAicHgiKTsKICBkcmF3LnN0eWxlLmhlaWdodCA9ICIiLmNvbmNhdChwb3NpdGlvbjJbMV0gKyBwb3NpdGlvbjFbMV0gLSAyICogcG9zWW1pbiArIDQwLCAicHgiKTsKICB2YXIgb25lTGluZSA9IGRyYXcuZ2V0Q29udGV4dCgiMmQiKTsgLy9jb25zb2xlLmxvZyhwb3NpdGlvbjEpOwoKICBvbmVMaW5lLm1vdmVUbygxMCwgMTAwKTsKICBvbmVMaW5lLmxpbmVUbygxMCwgNSk7CiAgb25lTGluZS5zdHJva2UoKTsKICBvbmVMaW5lLm1vdmVUbygxMCwgNSk7CiAgb25lTGluZS5saW5lVG8ocG9zaXRpb24yWzBdICsgcG9zaXRpb24xWzBdIC0gMiAqIHBvc1htaW4sIDUpOwogIG9uZUxpbmUuc3Ryb2tlKCk7CiAgb25lTGluZS5tb3ZlVG8ocG9zaXRpb24yWzBdICsgcG9zaXRpb24xWzBdIC0gMiAqIHBvc1htaW4sIDUpOwogIG9uZUxpbmUubGluZVRvKHBvc2l0aW9uMlswXSArIHBvc2l0aW9uMVswXSAtIDIgKiBwb3NYbWluLCAxMDApOwogIG9uZUxpbmUuc3Ryb2tlKCk7IC8vY29uc29sZS5sb2coImhoaGhoIikKfQovKioNCiAqDQogKiAg5a6e5L2T5qCH5rOoDQogKiBAcGFyYW0ge3N0cmluZ30gaWQg57uZYnV0dG9u5qCH562+55qEaWTvvIznlKjkuo7liKDpmaTml7bmn6Xmib4NCiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCDmoIfms6jpopzoibLntKLlvJUNCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGVudGl0eUFubm90YXRlVXRpbChpZCwgaW5kZXgpIHsKICB2YXIgdGV4dCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOyAvLyDmjInpkq7moLflvI8KICAvLyBUT0RP77ya5qC35byP576O5YyWCiAgLy8g5qCH5rOo5paH5pys5qC35byPCgogIHZhciBhbm5vdGF0ZWRUZXN0U3R5bGUgPSB0ZXh0U3R5bGUoaW5kZXgpOyAvLyDpgInkuK3kuI3kuLrnqboKCiAgaWYgKHRleHQubGVuZ3RoID4gMCkgewogICAgLy8g6I635Y+W6LW35aeL57Si5byV5ZKM57uT5p2f57Si5byVCiAgICB2YXIgYW5ub3RhdGVDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Fubm90YXRlQ29udGVudCIpOwogICAgdmFyIHJhbmdlID0gd2luZG93LmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCk7CiAgICB2YXIgcHJlU2VsZWN0aW9uUmFuZ2UgPSByYW5nZS5jbG9uZVJhbmdlKCk7CiAgICBwcmVTZWxlY3Rpb25SYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoYW5ub3RhdGVDb250ZW50KTsKICAgIHByZVNlbGVjdGlvblJhbmdlLnNldEVuZChyYW5nZS5zdGFydENvbnRhaW5lciwgcmFuZ2Uuc3RhcnRPZmZzZXQpOwoKICAgIHZhciBzdGFydCA9IF90b0NvbnN1bWFibGVBcnJheShwcmVTZWxlY3Rpb25SYW5nZS50b1N0cmluZygpKS5sZW5ndGg7CgogICAgdmFyIGVuZCA9IHN0YXJ0ICsgX3RvQ29uc3VtYWJsZUFycmF5KHJhbmdlLnRvU3RyaW5nKCkpLmxlbmd0aDsKCiAgICB2YXIgZW50aXR5QW5ub3RhdGVEYXRhID0gewogICAgICBpZDogaWQuc3BsaXQoIi0iKVsxXSwKICAgICAgLy8g55So5LqO5Yig6Zmk5p+l5om+CiAgICAgIGxhYmVsOiBpZC5zcGxpdCgiLSIpWzBdLAogICAgICAvLyDliIbnsbsKICAgICAgc3RhcnRfb2Zmc2V0OiBzdGFydCwKICAgICAgLy/otbflp4vntKLlvJUKICAgICAgZW5kX29mZnNldDogZW5kLAogICAgICAvL+e7k+adn+e0ouW8lQogICAgICB0ZXh0OiB0ZXh0LAogICAgICAvLyDkuLvopoHmmK/kuLrkuobliKDpmaTmoIfms6jvvIzlj6/ku6Xkvb/nlKjlhbbku5bliKDpmaTmlrnms5UKICAgICAgdXNlcjogMSwKICAgICAgLy8gVE9ETyDmmoLml7borr7kuLoxCiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkKICAgIH07CiAgICBzdG9yZS5kaXNwYXRjaCgiYW5ub3RhdGUvYWRkVG9MaXN0IiwgewogICAgICBpZDogaWQsCiAgICAgIGVudGl0eUFubm90YXRlRGF0YTogZW50aXR5QW5ub3RhdGVEYXRhCiAgICB9KTsgLy8g5oyJ6ZKu5re75Yqg5LqL5Lu2CgogICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImkiKTsKICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwogICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICBkZWxldGVCeUlkKGlkKTsKICAgIH0pOyAvLyDmjInpkq7moLflvI8KCiAgICBidXR0b24uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJlbC1pY29uLWNsb3NlIik7CiAgICBidXR0b24uc2V0QXR0cmlidXRlKCJzdHlsZSIsIGJ1dHRvblN0eWxlKCkpOwogICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICBzcGFuLnNldEF0dHJpYnV0ZSgic3R5bGUiLCBhbm5vdGF0ZWRUZXN0U3R5bGUpOwogICAgdmFyIFRleHRSYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApOwogICAgVGV4dFJhbmdlLnN1cnJvdW5kQ29udGVudHMoc3Bhbik7CiAgICBzcGFuLmFwcGVuZENoaWxkKGJ1dHRvbik7IC8v56e76Zmk6YCJ5Lit54q25oCB77yM5ZCm5YiZ5b6I6Zq+55yLCgogICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpOwogICAgc3RvcmUuc3RhdGUuYW5ub3RhdGUuaWQrKzsKICB9Cn0KLyoqDQogKg0KICogIOWIoOmZpOagt+W8jw0KICogQHBhcmFtIHtzdHJpbmd9IGlkID09PiDmjInpkq7nmoRpZO+8jOeUqOS6juafpeaJvg0KICovCgpmdW5jdGlvbiBkZWxldGVCeUlkKGlkKSB7CiAgdmFyIGFubm90YXRlQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbm5vdGF0ZUNvbnRlbnQiKTsKICB2YXIgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5wYXJlbnROb2RlOyAvLyDojrflj5bmlofmnKzvvIzlsIblhbbmj5LlhaXlvZPliY3oioLngrnliY3vvIzlho3liKDpmaToioLngrkKCiAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3Bhbi5pbm5lclRleHQudHJpbSgpKTsKICB2YXIgdGV4dCA9IHNwYW4uaW5uZXJUZXh0LnRyaW0oKTsKICBhbm5vdGF0ZUNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRleHROb2RlLCBzcGFuKTsKICBhbm5vdGF0ZUNvbnRlbnQucmVtb3ZlQ2hpbGQoc3Bhbik7CiAgc3RvcmUuZGlzcGF0Y2goImFubm90YXRlL2RlbGV0ZURhdGFGcm9tTGlzdCIsIHsKICAgIHR5cGU6IGlkLAogICAgdGV4dDogdGV4dAogIH0pOwp9Ci8qKg0KICoNCiAqICDmnLrlmajlrabkuaDoh6rliqjljJbmoIfms6gNCiAqIEBwYXJhbXMgZGF0YSA9PT4g5ZCO5Y+w5Lyg5p2l55qE5pWw5o2u77yM5LiA57u05a2X56ym5Liy5pWw57uEDQogKi8KLy8gVE9ETyDojrflj5bmr4/kuKrlrZfnmoTotbflp4vntKLlvJUKLy8gZnVuY3Rpb24gYXV0b0Fubm90YXRlKGRhdGEpIHsKLy8gICBsZXQgYW5ub3RhdGVDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFubm90YXRlQ29udGVudCIpOwovLyAgIGxldCBhcnJheSA9IFtdOwovLyAgIC8v5oqK5a2X56ym5Liy5YiG5YmyCi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7Ci8vICAgICBpZiAoZGF0YVtpXSkgewovLyAgICAgICBhcnJheS5wdXNoKC4uLmRhdGFbaV0uc3BsaXQoIiAiKSk7Ci8vICAgICB9Ci8vICAgICAvL+aKiuWIhuWJsuWHuuadpeeahOWtl+espuS4suWIhuWIq+agh+azqAovLyAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhcnJheS5sZW5ndGg7IGorKykgewovLyAgICAgICBpZiAoYXJyYXlbal0ubGVuZ3RoICE9PSAwKSB7Ci8vICAgICAgICAgc3RvcmUuc3RhdGUuYW5ub3RhdGUuZW50aXR5QW5ub3RhdGVEYXRhW2ldLnB1c2goYXJyYXlbal0pOwovLyAgICAgICAgIGFubm90YXRlQ29udGVudC5pbm5lckhUTUwgPSBhbm5vdGF0ZUNvbnRlbnQuaW5uZXJIVE1MLnJlcGxhY2VBbGwoCi8vICAgICAgICAgICBhcnJheVtqXSwKLy8gICAgICAgICAgIGA8c3BhbiBzdHlsZT0nJHt0aGlzLnRleHRTdHlsZShpKX0nPiR7Ci8vICAgICAgICAgICAgIGFycmF5W2pdCi8vICAgICAgICAgICB9PGkgY2xhc3M9J2RlbGV0ZUJ1dHRvblRlbXAgZWwtaWNvbi1jbG9zZScgc3R5bGU9JyR7dGhpcy5idXR0b25TdHlsZSgpfSc+PC9pPiA8L3NwYW4+YAovLyAgICAgICAgICk7Ci8vICAgICAgICAgbGV0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKAovLyAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGVsZXRlQnV0dG9uVGVtcCIpCi8vICAgICAgICAgKTsKLy8gICAgICAgICAvL+afpeaJvuaMiemSruW5tua3u+WKoOWIoOmZpOS6i+S7tu+8jOi/meenjeaWueazleW+iGxvd++8jOS9huaYr+acieaViAovLyAgICAgICAgIC8v5aaC5p6c5L2g5pyJ5pu05aW955qE5oOz5rOV77yM5qyi6L+O5L+u5pS5Ci8vICAgICAgICAgLy9UT0RP77ya5LyY5YyW5Luj56CBCi8vICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBidXR0b25zLmxlbmd0aDsgaysrKSB7Ci8vICAgICAgICAgICBidXR0b25zW2tdLmlkID0gaSArICItIiArIHN0b3JlLnN0YXRlLmFubm90YXRlLmlkKys7Ci8vICAgICAgICAgICBidXR0b25zW2tdLm9uY2xpY2sgPSAoKSA9PiB7Ci8vICAgICAgICAgICAgIHRoaXMuZGVsZXRlQnlJZChidXR0b25zW2tdLmlkKTsKLy8gICAgICAgICAgIH07Ci8vICAgICAgICAgfQovLyAgICAgICB9Ci8vICAgICB9Ci8vICAgICBhcnJheSA9IFtdOwovLyAgIH0KLy8gfSw="},{"version":3,"sources":["F:/BS/annotate-system/frontend/src/utils/annotateUtils.js"],"names":["store","buttonStyle","textStyle","index","state","annotate","labels","color","relationAnnotateUtil","id","order","text","window","getSelection","toString","annotatedTestStyle","length","annotateContent","document","querySelector","range","getRangeAt","preSelectionRange","cloneRange","selectNodeContents","setEnd","startContainer","startOffset","span","createElement","setAttribute","TextRange","surroundContents","removeAllRanges","relationMatchingUtil","position1","position2","draw","console","log","posXmin","posYmin","node","getElementById","appendChild","style","position","zIndex","left","top","width","height","oneLine","getContext","moveTo","lineTo","stroke","entityAnnotateUtil","start","end","entityAnnotateData","split","label","start_offset","end_offset","user","updated_at","Date","dispatch","button","addEventListener","deleteById","parentNode","textNode","createTextNode","innerText","trim","insertBefore","removeChild","type"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,eAAlB,C,CACA;;AACA;AACA;AACA;;AACA,SAASC,WAAT,GAAuB;AACrB,SAAO,gCAAP;AACD;AACD;AACA;AACA;AACA;AACA;;;AACA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,oCAA2BH,KAAK,CAACI,KAAN,CAAYC,QAAZ,CAAqBC,MAArB,CAA4BH,KAA5B,EAAmCI,KAA9D,2CAC2BP,KAAK,CAACI,KAAN,CAAYC,QAAZ,CAAqBC,MAArB,CAA4BH,KAA5B,EAAmCI,KAD9D;AAGD;AAED;AACA;AACA;AACA;;;AACA,OAAO,SAASC,oBAAT,CAA8BC,EAA9B,EAAkCC,KAAlC,EAAyC;AAC9C,MAAIC,IAAI,GAAGC,MAAM,CAACC,YAAP,GAAsBC,QAAtB,EAAX,CAD8C,CAG9C;AACA;AACA;;AACA,MAAIC,kBAAkB,uIAAtB,CAN8C,CAS9C;;AACA,MAAIJ,IAAI,CAACK,MAAL,GAAc,CAAlB,EAAqB;AACnB;AACA,QAAIC,eAAe,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAtB;AACA,QAAMC,KAAK,GAAGR,MAAM,CAACC,YAAP,GAAsBQ,UAAtB,CAAiC,CAAjC,CAAd;AACA,QAAMC,iBAAiB,GAAGF,KAAK,CAACG,UAAN,EAA1B;AACAD,IAAAA,iBAAiB,CAACE,kBAAlB,CAAqCP,eAArC;AACAK,IAAAA,iBAAiB,CAACG,MAAlB,CAAyBL,KAAK,CAACM,cAA/B,EAA+CN,KAAK,CAACO,WAArD;AAEA,QAAIC,IAAI,GAAGV,QAAQ,CAACW,aAAT,CAAuB,MAAvB,CAAX;AACAD,IAAAA,IAAI,CAACE,YAAL,CAAkB,OAAlB,EAA2Bf,kBAA3B;AACA,QAAIL,KAAJ,EAAWkB,IAAI,CAACE,YAAL,CAAkB,IAAlB,EAAwBhB,QAAQ,CAACL,EAAE,CAAC,CAAD,CAAH,CAAR,GAAkB,QAA1C,EAAX,KACKmB,IAAI,CAACE,YAAL,CAAkB,IAAlB,EAAwBhB,QAAQ,CAACL,EAAE,CAAC,CAAD,CAAH,CAAR,GAAkB,OAA1C;AAEL,QAAIsB,SAAS,GAAGnB,MAAM,CAACC,YAAP,GAAsBQ,UAAtB,CAAiC,CAAjC,CAAhB;AACAU,IAAAA,SAAS,CAACC,gBAAV,CAA2BJ,IAA3B,EAdmB,CAenB;AACA;;AACAhB,IAAAA,MAAM,CAACC,YAAP,GAAsBoB,eAAtB,GAjBmB,CAkBnB;AACD;AACF,C,CACD;;AACA,OAAO,SAASC,oBAAT,CAA8BC,SAA9B,EAAyCC,SAAzC,EAAoD3B,EAApD,EAAwD;AAC7D,MAAI4B,IAAI,GAAGnB,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAAX;AACAS,EAAAA,OAAO,CAACC,GAAR,CAAYJ,SAAZ;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACA,MAAII,OAAJ,EAAaC,OAAb;AACA,MAAIN,SAAS,CAAC,CAAD,CAAT,IAAgBC,SAAS,CAAC,CAAD,CAA7B,EAAkCI,OAAO,GAAGL,SAAS,CAAC,CAAD,CAAnB,CAAlC,KACKK,OAAO,GAAGJ,SAAS,CAAC,CAAD,CAAnB;AACL,MAAID,SAAS,CAAC,CAAD,CAAT,IAAgBC,SAAS,CAAC,CAAD,CAA7B,EAAkCK,OAAO,GAAGN,SAAS,CAAC,CAAD,CAAnB,CAAlC,KACKM,OAAO,GAAGL,SAAS,CAAC,CAAD,CAAnB;AAEL,MAAIM,IAAI,GAAGxB,QAAQ,CAACyB,cAAT,CAAwB7B,QAAQ,CAACL,EAAE,CAAC,CAAD,CAAH,CAAR,GAAkB,OAA1C,CAAX;AACA6B,EAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACAA,EAAAA,IAAI,CAACE,WAAL,CAAiBP,IAAjB;AACAA,EAAAA,IAAI,CAACQ,KAAL,CAAWC,QAAX,GAAsB,UAAtB;AACAT,EAAAA,IAAI,CAACQ,KAAL,CAAWE,MAAX,GAAoB,CAApB;AACAV,EAAAA,IAAI,CAACQ,KAAL,CAAWG,IAAX;AACAX,EAAAA,IAAI,CAACQ,KAAL,CAAWI,GAAX;AACAZ,EAAAA,IAAI,CAACQ,KAAL,CAAWK,KAAX,aAAsBd,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB,GAA8B,IAAIK,OAAxD;AACAH,EAAAA,IAAI,CAACQ,KAAL,CAAWM,MAAX,aAAuBf,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB,GAA8B,IAAIM,OAAlC,GAA4C,EAAnE;AACA,MAAIW,OAAO,GAAGf,IAAI,CAACgB,UAAL,CAAgB,IAAhB,CAAd,CAnB6D,CAoB7D;;AACAD,EAAAA,OAAO,CAACE,MAAR,CAAe,EAAf,EAAmB,GAAnB;AACAF,EAAAA,OAAO,CAACG,MAAR,CAAe,EAAf,EAAmB,CAAnB;AACAH,EAAAA,OAAO,CAACI,MAAR;AACAJ,EAAAA,OAAO,CAACE,MAAR,CAAe,EAAf,EAAmB,CAAnB;AACAF,EAAAA,OAAO,CAACG,MAAR,CAAenB,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB,GAA8B,IAAIK,OAAjD,EAA0D,CAA1D;AACAY,EAAAA,OAAO,CAACI,MAAR;AACAJ,EAAAA,OAAO,CAACE,MAAR,CAAelB,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB,GAA8B,IAAIK,OAAjD,EAA0D,CAA1D;AACAY,EAAAA,OAAO,CAACG,MAAR,CAAenB,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB,GAA8B,IAAIK,OAAjD,EAA0D,GAA1D;AACAY,EAAAA,OAAO,CAACI,MAAR,GA7B6D,CA+B7D;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,kBAAT,CAA4BhD,EAA5B,EAAgCN,KAAhC,EAAuC;AAC5C,MAAIQ,IAAI,GAAGC,MAAM,CAACC,YAAP,GAAsBC,QAAtB,EAAX,CAD4C,CAG5C;AACA;AACA;;AACA,MAAIC,kBAAkB,GAAGb,SAAS,CAACC,KAAD,CAAlC,CAN4C,CAO5C;;AACA,MAAIQ,IAAI,CAACK,MAAL,GAAc,CAAlB,EAAqB;AACnB;AACA,QAAIC,eAAe,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAtB;AACA,QAAMC,KAAK,GAAGR,MAAM,CAACC,YAAP,GAAsBQ,UAAtB,CAAiC,CAAjC,CAAd;AACA,QAAMC,iBAAiB,GAAGF,KAAK,CAACG,UAAN,EAA1B;AACAD,IAAAA,iBAAiB,CAACE,kBAAlB,CAAqCP,eAArC;AACAK,IAAAA,iBAAiB,CAACG,MAAlB,CAAyBL,KAAK,CAACM,cAA/B,EAA+CN,KAAK,CAACO,WAArD;;AACA,QAAI+B,KAAK,GAAG,mBAAIpC,iBAAiB,CAACR,QAAlB,EAAJ,EAAkCE,MAA9C;;AACA,QAAI2C,GAAG,GAAGD,KAAK,GAAG,mBAAItC,KAAK,CAACN,QAAN,EAAJ,EAAsBE,MAAxC;;AAEA,QAAI4C,kBAAkB,GAAG;AACvBnD,MAAAA,EAAE,EAAEA,EAAE,CAACoD,KAAH,CAAS,GAAT,EAAc,CAAd,CADmB;AACD;AACtBC,MAAAA,KAAK,EAAErD,EAAE,CAACoD,KAAH,CAAS,GAAT,EAAc,CAAd,CAFgB;AAEE;AACzBE,MAAAA,YAAY,EAAEL,KAHS;AAGF;AACrBM,MAAAA,UAAU,EAAEL,GAJW;AAIN;AACjBhD,MAAAA,IAAI,EAAEA,IALiB;AAKX;AACZsD,MAAAA,IAAI,EAAE,CANiB;AAMd;AACTC,MAAAA,UAAU,EAAE,IAAIC,IAAJ;AAPW,KAAzB;AAUAnE,IAAAA,KAAK,CAACoE,QAAN,CAAe,oBAAf,EAAqC;AAAE3D,MAAAA,EAAE,EAAFA,EAAF;AAAMmD,MAAAA,kBAAkB,EAAlBA;AAAN,KAArC,EApBmB,CAqBnB;;AACA,QAAIS,MAAM,GAAGnD,QAAQ,CAACW,aAAT,CAAuB,GAAvB,CAAb;AACAwC,IAAAA,MAAM,CAACvC,YAAP,CAAoB,IAApB,EAA0BrB,EAA1B;AACA4D,IAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACrCC,MAAAA,UAAU,CAAC9D,EAAD,CAAV;AACD,KAFD,EAxBmB,CA2BnB;;AACA4D,IAAAA,MAAM,CAACvC,YAAP,CAAoB,OAApB,EAA6B,eAA7B;AACAuC,IAAAA,MAAM,CAACvC,YAAP,CAAoB,OAApB,EAA6B7B,WAAW,EAAxC;AACA,QAAI2B,IAAI,GAAGV,QAAQ,CAACW,aAAT,CAAuB,MAAvB,CAAX;AACAD,IAAAA,IAAI,CAACE,YAAL,CAAkB,OAAlB,EAA2Bf,kBAA3B;AAEA,QAAIgB,SAAS,GAAGnB,MAAM,CAACC,YAAP,GAAsBQ,UAAtB,CAAiC,CAAjC,CAAhB;AACAU,IAAAA,SAAS,CAACC,gBAAV,CAA2BJ,IAA3B;AACAA,IAAAA,IAAI,CAACgB,WAAL,CAAiByB,MAAjB,EAnCmB,CAoCnB;;AACAzD,IAAAA,MAAM,CAACC,YAAP,GAAsBoB,eAAtB;AACAjC,IAAAA,KAAK,CAACI,KAAN,CAAYC,QAAZ,CAAqBI,EAArB;AACD;AACF;AAED;AACA;AACA;AACA;AACA;;AACA,SAAS8D,UAAT,CAAoB9D,EAApB,EAAwB;AACtB,MAAIQ,eAAe,GAAGC,QAAQ,CAACyB,cAAT,CAAwB,iBAAxB,CAAtB;AACA,MAAIf,IAAI,GAAGV,QAAQ,CAACyB,cAAT,CAAwBlC,EAAxB,EAA4B+D,UAAvC,CAFsB,CAGtB;;AACA,MAAIC,QAAQ,GAAGvD,QAAQ,CAACwD,cAAT,CAAwB9C,IAAI,CAAC+C,SAAL,CAAeC,IAAf,EAAxB,CAAf;AACA,MAAIjE,IAAI,GAAGiB,IAAI,CAAC+C,SAAL,CAAeC,IAAf,EAAX;AACA3D,EAAAA,eAAe,CAAC4D,YAAhB,CAA6BJ,QAA7B,EAAuC7C,IAAvC;AACAX,EAAAA,eAAe,CAAC6D,WAAhB,CAA4BlD,IAA5B;AACA5B,EAAAA,KAAK,CAACoE,QAAN,CAAe,6BAAf,EAA8C;AAAEW,IAAAA,IAAI,EAAEtE,EAAR;AAAYE,IAAAA,IAAI,EAAJA;AAAZ,GAA9C;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import store from \"@/store/index\";\r\n//import { some } from \"core-js/core/array\";\r\n/**\r\n *  按钮样式\r\n */\r\nfunction buttonStyle() {\r\n  return \"cursor:pointer;margin-left:5px\";\r\n}\r\n/**\r\n *\r\n *  返回标注文本样式\r\n * @param {number} index 标注颜色索引\r\n */\r\nfunction textStyle(index) {\r\n  return `border:5px solid ${store.state.annotate.labels[index].color};\r\n          background-color:${store.state.annotate.labels[index].color};\r\n          border-radius: 10px;`;\r\n}\r\n\r\n/**\r\n *\r\n *  关系标注\r\n */\r\nexport function relationAnnotateUtil(id, order) {\r\n  let text = window.getSelection().toString();\r\n\r\n  // 按钮样式\r\n  // TODO：样式美化\r\n  // 标注文本样式\r\n  let annotatedTestStyle = `border:5px solid #A3B9D9;\r\n                            background-color:#A3B9D9;\r\n                            border-radius: 10px;`;\r\n  // 选中不为空\r\n  if (text.length > 0) {\r\n    // 获取起始索引和结束索引\r\n    let annotateContent = document.querySelector(\"#annotateContent\");\r\n    const range = window.getSelection().getRangeAt(0);\r\n    const preSelectionRange = range.cloneRange();\r\n    preSelectionRange.selectNodeContents(annotateContent);\r\n    preSelectionRange.setEnd(range.startContainer, range.startOffset);\r\n\r\n    let span = document.createElement(\"span\");\r\n    span.setAttribute(\"style\", annotatedTestStyle);\r\n    if (order) span.setAttribute(\"id\", toString(id[1]) + \"second\");\r\n    else span.setAttribute(\"id\", toString(id[0]) + \"first\");\r\n\r\n    let TextRange = window.getSelection().getRangeAt(0);\r\n    TextRange.surroundContents(span);\r\n    //span.appendChild(button);\r\n    //移除选中状态，否则很难看\r\n    window.getSelection().removeAllRanges();\r\n    //store.state.annotate.id++;\r\n  }\r\n}\r\n// 两段标注文本之间连线\r\nexport function relationMatchingUtil(position1, position2, id) {\r\n  let draw = document.createElement(\"canvas\");\r\n  console.log(position1);\r\n  console.log(position2);\r\n  let posXmin, posYmin;\r\n  if (position1[0] <= position2[0]) posXmin = position1[0];\r\n  else posXmin = position2[0];\r\n  if (position1[1] <= position2[1]) posYmin = position1[1];\r\n  else posYmin = position2[1];\r\n\r\n  let node = document.getElementById(toString(id[0]) + \"first\");\r\n  console.log(node);\r\n  node.appendChild(draw);\r\n  draw.style.position = \"relative\";\r\n  draw.style.zIndex = 5;\r\n  draw.style.left = `0px`;\r\n  draw.style.top = `0px`;\r\n  draw.style.width = `${position2[0] + position1[0] - 2 * posXmin}px`;\r\n  draw.style.height = `${position2[1] + position1[1] - 2 * posYmin + 40}px`;\r\n  let oneLine = draw.getContext(\"2d\");\r\n  //console.log(position1);\r\n  oneLine.moveTo(10, 100);\r\n  oneLine.lineTo(10, 5);\r\n  oneLine.stroke();\r\n  oneLine.moveTo(10, 5);\r\n  oneLine.lineTo(position2[0] + position1[0] - 2 * posXmin, 5);\r\n  oneLine.stroke();\r\n  oneLine.moveTo(position2[0] + position1[0] - 2 * posXmin, 5);\r\n  oneLine.lineTo(position2[0] + position1[0] - 2 * posXmin, 100);\r\n  oneLine.stroke();\r\n\r\n  //console.log(\"hhhhh\")\r\n}\r\n/**\r\n *\r\n *  实体标注\r\n * @param {string} id 给button标签的id，用于删除时查找\r\n * @param {number} index 标注颜色索引\r\n */\r\nexport function entityAnnotateUtil(id, index) {\r\n  let text = window.getSelection().toString();\r\n\r\n  // 按钮样式\r\n  // TODO：样式美化\r\n  // 标注文本样式\r\n  let annotatedTestStyle = textStyle(index);\r\n  // 选中不为空\r\n  if (text.length > 0) {\r\n    // 获取起始索引和结束索引\r\n    let annotateContent = document.querySelector(\"#annotateContent\");\r\n    const range = window.getSelection().getRangeAt(0);\r\n    const preSelectionRange = range.cloneRange();\r\n    preSelectionRange.selectNodeContents(annotateContent);\r\n    preSelectionRange.setEnd(range.startContainer, range.startOffset);\r\n    let start = [...preSelectionRange.toString()].length;\r\n    let end = start + [...range.toString()].length;\r\n\r\n    let entityAnnotateData = {\r\n      id: id.split(\"-\")[1], // 用于删除查找\r\n      label: id.split(\"-\")[0], // 分类\r\n      start_offset: start, //起始索引\r\n      end_offset: end, //结束索引\r\n      text: text, // 主要是为了删除标注，可以使用其他删除方法\r\n      user: 1, // TODO 暂时设为1\r\n      updated_at: new Date(),\r\n    };\r\n\r\n    store.dispatch(\"annotate/addToList\", { id, entityAnnotateData });\r\n    // 按钮添加事件\r\n    let button = document.createElement(\"i\");\r\n    button.setAttribute(\"id\", id);\r\n    button.addEventListener(\"click\", () => {\r\n      deleteById(id);\r\n    });\r\n    // 按钮样式\r\n    button.setAttribute(\"class\", \"el-icon-close\");\r\n    button.setAttribute(\"style\", buttonStyle());\r\n    let span = document.createElement(\"span\");\r\n    span.setAttribute(\"style\", annotatedTestStyle);\r\n\r\n    let TextRange = window.getSelection().getRangeAt(0);\r\n    TextRange.surroundContents(span);\r\n    span.appendChild(button);\r\n    //移除选中状态，否则很难看\r\n    window.getSelection().removeAllRanges();\r\n    store.state.annotate.id++;\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n *  删除样式\r\n * @param {string} id ==> 按钮的id，用于查找\r\n */\r\nfunction deleteById(id) {\r\n  let annotateContent = document.getElementById(\"annotateContent\");\r\n  let span = document.getElementById(id).parentNode;\r\n  // 获取文本，将其插入当前节点前，再删除节点\r\n  let textNode = document.createTextNode(span.innerText.trim());\r\n  let text = span.innerText.trim();\r\n  annotateContent.insertBefore(textNode, span);\r\n  annotateContent.removeChild(span);\r\n  store.dispatch(\"annotate/deleteDataFromList\", { type: id, text });\r\n}\r\n\r\n/**\r\n *\r\n *  机器学习自动化标注\r\n * @params data ==> 后台传来的数据，一维字符串数组\r\n */\r\n// TODO 获取每个字的起始索引\r\n// function autoAnnotate(data) {\r\n//   let annotateContent = document.getElementById(\"annotateContent\");\r\n//   let array = [];\r\n//   //把字符串分割\r\n//   for (let i = 0; i < data.length; i++) {\r\n//     if (data[i]) {\r\n//       array.push(...data[i].split(\" \"));\r\n//     }\r\n//     //把分割出来的字符串分别标注\r\n//     for (let j = 0; j < array.length; j++) {\r\n//       if (array[j].length !== 0) {\r\n//         store.state.annotate.entityAnnotateData[i].push(array[j]);\r\n//         annotateContent.innerHTML = annotateContent.innerHTML.replaceAll(\r\n//           array[j],\r\n//           `<span style='${this.textStyle(i)}'>${\r\n//             array[j]\r\n//           }<i class='deleteButtonTemp el-icon-close' style='${this.buttonStyle()}'></i> </span>`\r\n//         );\r\n\r\n//         let buttons = Array.from(\r\n//           document.getElementsByClassName(\"deleteButtonTemp\")\r\n//         );\r\n//         //查找按钮并添加删除事件，这种方法很low，但是有效\r\n//         //如果你有更好的想法，欢迎修改\r\n//         //TODO：优化代码\r\n//         for (let k = 0; k < buttons.length; k++) {\r\n//           buttons[k].id = i + \"-\" + store.state.annotate.id++;\r\n//           buttons[k].onclick = () => {\r\n//             this.deleteById(buttons[k].id);\r\n//           };\r\n//         }\r\n//       }\r\n//     }\r\n//     array = [];\r\n//   }\r\n// },\r\n"]}]}