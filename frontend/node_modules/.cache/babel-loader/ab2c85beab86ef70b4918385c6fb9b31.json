{"remainingRequest":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\BS\\annotate-system\\frontend\\src\\layout\\mixin\\ResizeHandler.js","dependencies":[{"path":"F:\\BS\\annotate-system\\frontend\\src\\layout\\mixin\\ResizeHandler.js","mtime":1639627257262},{"path":"F:\\BS\\annotate-system\\frontend\\babel.config.js","mtime":1639627257111},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639628022585},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639628024341},{"path":"F:\\BS\\annotate-system\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1639628021347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwp2YXIgX2RvY3VtZW50ID0gZG9jdW1lbnQsCiAgICBib2R5ID0gX2RvY3VtZW50LmJvZHk7CnZhciBXSURUSCA9IDk5MjsgLy8g5Y+C6ICDQm9vdHN0cmFw55qE5ZON5bqU5byP6K6+6K6hCgpleHBvcnQgZGVmYXVsdCB7CiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKCkgewogICAgICBpZiAodGhpcy5kZXZpY2UgPT09ICdtb2JpbGUnICYmIHRoaXMuc2lkZWJhci5vcGVuZWQpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnYXBwL2Nsb3NlU2lkZUJhcicsIHsKICAgICAgICAgIHdpdGhvdXRBbmltYXRpb246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLiRfcmVzaXplSGFuZGxlcik7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuJF9yZXNpemVIYW5kbGVyKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgaXNNb2JpbGUgPSB0aGlzLiRfaXNNb2JpbGUoKTsKCiAgICBpZiAoaXNNb2JpbGUpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC90b2dnbGVEZXZpY2UnLCAnbW9iaWxlJyk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdhcHAvY2xvc2VTaWRlQmFyJywgewogICAgICAgIHdpdGhvdXRBbmltYXRpb246IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyB1c2UgJF8gZm9yIG1peGlucyBwcm9wZXJ0aWVzCiAgICAvLyBodHRwczovL3Z1ZWpzLm9yZy92Mi9zdHlsZS1ndWlkZS9pbmRleC5odG1sI1ByaXZhdGUtcHJvcGVydHktbmFtZXMtZXNzZW50aWFsCiAgICAkX2lzTW9iaWxlOiBmdW5jdGlvbiAkX2lzTW9iaWxlKCkgewogICAgICB2YXIgcmVjdCA9IGJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHJldHVybiByZWN0LndpZHRoIC0gMSA8IFdJRFRIOwogICAgfSwKICAgICRfcmVzaXplSGFuZGxlcjogZnVuY3Rpb24gJF9yZXNpemVIYW5kbGVyKCkgewogICAgICBpZiAoIWRvY3VtZW50LmhpZGRlbikgewogICAgICAgIHZhciBpc01vYmlsZSA9IHRoaXMuJF9pc01vYmlsZSgpOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdhcHAvdG9nZ2xlRGV2aWNlJywgaXNNb2JpbGUgPyAnbW9iaWxlJyA6ICdkZXNrdG9wJyk7CgogICAgICAgIGlmIChpc01vYmlsZSkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC9jbG9zZVNpZGVCYXInLCB7CiAgICAgICAgICAgIHdpdGhvdXRBbmltYXRpb246IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["F:/BS/annotate-system/frontend/src/layout/mixin/ResizeHandler.js"],"names":["store","document","body","WIDTH","watch","$route","device","sidebar","opened","dispatch","withoutAnimation","beforeMount","window","addEventListener","$_resizeHandler","beforeDestroy","removeEventListener","mounted","isMobile","$_isMobile","methods","rect","getBoundingClientRect","width","hidden"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,gBAAiBC,QAAjB;AAAA,IAAQC,IAAR,aAAQA,IAAR;AACA,IAAMC,KAAK,GAAG,GAAd,C,CAAkB;;AAElB,eAAe;AACbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MADK,oBACI;AACP,UAAI,KAAKC,MAAL,KAAgB,QAAhB,IAA4B,KAAKC,OAAL,CAAaC,MAA7C,EAAqD;AACnDR,QAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmC;AAAEC,UAAAA,gBAAgB,EAAE;AAApB,SAAnC;AACD;AACF;AALI,GADM;AAQbC,EAAAA,WARa,yBAQC;AACZC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKC,eAAvC;AACD,GAVY;AAWbC,EAAAA,aAXa,2BAWG;AACdH,IAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqC,KAAKF,eAA1C;AACD,GAbY;AAcbG,EAAAA,OAda,qBAcH;AACR,QAAMC,QAAQ,GAAG,KAAKC,UAAL,EAAjB;;AACA,QAAID,QAAJ,EAAc;AACZlB,MAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmC,QAAnC;AACAT,MAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmC;AAAEC,QAAAA,gBAAgB,EAAE;AAApB,OAAnC;AACD;AACF,GApBY;AAqBbU,EAAAA,OAAO,EAAE;AACP;AACA;AACAD,IAAAA,UAHO,wBAGM;AACX,UAAME,IAAI,GAAGnB,IAAI,CAACoB,qBAAL,EAAb;AACA,aAAOD,IAAI,CAACE,KAAL,GAAa,CAAb,GAAiBpB,KAAxB;AACD,KANM;AAOPW,IAAAA,eAPO,6BAOW;AAChB,UAAI,CAACb,QAAQ,CAACuB,MAAd,EAAsB;AACpB,YAAMN,QAAQ,GAAG,KAAKC,UAAL,EAAjB;AACAnB,QAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmCS,QAAQ,GAAG,QAAH,GAAc,SAAzD;;AAEA,YAAIA,QAAJ,EAAc;AACZlB,UAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmC;AAAEC,YAAAA,gBAAgB,EAAE;AAApB,WAAnC;AACD;AACF;AACF;AAhBM;AArBI,CAAf","sourcesContent":["import store from '@/store'\r\n\r\nconst { body } = document\r\nconst WIDTH = 992 // 参考Bootstrap的响应式设计\r\n\r\nexport default {\r\n  watch: {\r\n    $route() {\r\n      if (this.device === 'mobile' && this.sidebar.opened) {\r\n        store.dispatch('app/closeSideBar', { withoutAnimation: false })\r\n      }\r\n    }\r\n  },\r\n  beforeMount() {\r\n    window.addEventListener('resize', this.$_resizeHandler)\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.$_resizeHandler)\r\n  },\r\n  mounted() {\r\n    const isMobile = this.$_isMobile()\r\n    if (isMobile) {\r\n      store.dispatch('app/toggleDevice', 'mobile')\r\n      store.dispatch('app/closeSideBar', { withoutAnimation: true })\r\n    }\r\n  },\r\n  methods: {\r\n    // use $_ for mixins properties\r\n    // https://vuejs.org/v2/style-guide/index.html#Private-property-names-essential\r\n    $_isMobile() {\r\n      const rect = body.getBoundingClientRect()\r\n      return rect.width - 1 < WIDTH\r\n    },\r\n    $_resizeHandler() {\r\n      if (!document.hidden) {\r\n        const isMobile = this.$_isMobile()\r\n        store.dispatch('app/toggleDevice', isMobile ? 'mobile' : 'desktop')\r\n\r\n        if (isMobile) {\r\n          store.dispatch('app/closeSideBar', { withoutAnimation: true })\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"]}]}