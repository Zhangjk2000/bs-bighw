{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-39fa9acf\"],{\"55f4\":function(t,e,i){},7996:function(t,e,i){\"use strict\";i(\"55f4\")},b270:function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"select\"},[i(\"el-form\",{attrs:{model:t.formInline}},[i(\"el-form-item\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{label:\"数据集：\"}},[i(\"el-select\",{attrs:{placeholder:\"选择数据集\"},model:{value:t.formInline.region,callback:function(e){t.$set(t.formInline,\"region\",e)},expression:\"formInline.region\"}},t._l(t.dataList,(function(t){return i(\"el-option\",{key:t.code,attrs:{label:t.name,value:t.name}})})),1),i(\"el-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\"},on:{click:function(e){return t.getImgList(t.formInline.region)}}},[t._v(\"选择\")])],1)],1)],1)},a=[],s=i(\"5530\"),o=(i(\"a434\"),i(\"ac1f\"),i(\"1276\"),i(\"d3b7\"),i(\"25f0\"),i(\"b680\"),i(\"a253\")),r=i(\"278e\"),l=i(\"2f62\"),c={name:\"stagePicPage\",components:{\"ui-marker\":o[\"AIMarker\"]},data:function(){return{formInline:{region:\"\",radio:\"全部\"},dataList:[],imgList:[],uuid:\"0da9130\",currentInfo:{currentBaseImage:\"\",rawW:0,rawH:0,currentW:0,currentH:0,checked:!1,data:[]},active:0,picTotal:10,tags:[{tagName:\"cat\",tag:\"0x0001\"},{tagName:\"dog\",tag:\"0x0002\"}],allInfo:[],imageInfo:[],innerVisible:!1,innerForm:{tagName:\"\",tag:\"\"},tep_rules:{tagName:[{required:!0,message:\"请输入\",trigger:\"blur\"}],tag:[{required:!0,message:\"请输入\",trigger:\"blur\"}]}}},computed:Object(s[\"a\"])(Object(s[\"a\"])({},Object(l[\"b\"])([\"receivetaskList\"])),Object(l[\"b\"])([\"labels\"])),mounted:function(){this.dataList=this.receivetaskList},methods:{onImageLoad:function(t){console.log(\"data:\"),console.log(t),this.imageInfo=t},getImgList:function(t){var e=this;Object(r[\"g\"])(t).then((function(t){e.imgList=t.data[\"img_list\"]}))},setTag:function(t){this.$refs[\"aiPanel-editor\"].getMarker().setTag(t)},addTag:function(){this.innerVisible=!0,this.innerForm.tagName=\"\",this.innerForm.tag=\"\"},delTag:function(t){this.tags.splice(t,1)},close:function(){this.innerVisible=!1,this.$refs[\"innerForm\"].resetFields()},beforeClose:function(t){this.$refs[\"innerForm\"].resetFields(),t()},createForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t){for(var i in e.tags){var n=e.tags[i];if(n.tagName===e.innerForm.tagName||n.tag===e.innerForm.tag)return void e.$message.warning(\"标签名或标签值已存在，请重新输入\")}e.tags.push({tagName:e.innerForm.tagName,tag:e.innerForm.tag}),e.innerVisible=!1}}))},submitForm:function(t){var e=this.$refs[\"aiPanel-editor\"].getMarker().getData(),i={filename:\"\",height:0,width:0,xmin:[],xmax:[],ymin:[],ymax:[],tag:[]};this.allInfo=e,console.log(this.allInfo);var n={width:this.imageInfo.rawW,height:this.imageInfo.rawH};console.log(this.currentInfo.currentBaseImage),i.filename=this.currentInfo.currentBaseImage[0].split(\"/\").pop().split(\".\")[0],i.width=n.width,i.height=n.height;for(var a=0;a<this.allInfo.length;a++){var s=(parseInt(this.allInfo[0].position.x.substring(0,this.allInfo[0].position.x.length-1))*n.width/100).toFixed(0).toString();console.log(s,\"左上\");var o=(parseInt(this.allInfo[0].position.y.substring(0,this.allInfo[0].position.y.length-1))*n.height/100).toFixed(0).toString();console.log(o,\"右上\");var r=(parseInt(this.allInfo[0].position.x1.substring(0,this.allInfo[0].position.x1.length-1))*n.width/100).toFixed(0).toString();console.log(r,\"右上\");var l=(parseInt(this.allInfo[0].position.y1.substring(0,this.allInfo[0].position.y1.length-1))*n.height/100).toFixed(0).toString();console.log(l,\"左上\");var c=this.allInfo[a].tagName;i.xmin.push(s),i.xmax.push(r),i.ymin.push(o),i.ymax.push(l),i.tag.push(c)}console.log(\"Labels:\"),console.log(i),this.$store.dispatch(\"annotate/setLabels\",{Labels:i,form:t}),this.$message.success(\"标签保存成功\")},showMore:function(t){var e=this.$refs.picContainer;if(\"up\"==t){if(this.active++,this.active>=this.picTotal-3)return void(this.active=this.pics.length-3);if(this.pics.length-3==this.active&&this.pics.length<this.picTotal)return this.photoPageIndex++,void this.getPhotos()}else this.active--,this.active<0&&(this.active=0);e.style.transform=\"translateX(-\"+this.active/this.pics.length*100+\"%)\"},getPhotos:function(){var t=this;return this.$nextTick((function(){var e=t.$refs.picContainer;e&&(e.style.width=e.scrollWidth+\"px\",e.style.transform=\"translateX(-\"+t.active/t.pics.length*100+\"%)\")}))},activePic:function(t){this.currentInfo.currentBaseImage=t},handleChange:function(t){console.log(t)}}},g=c,h=(i(\"7996\"),i(\"2877\")),f=Object(h[\"a\"])(g,n,a,!1,null,\"63a806d3\",null);e[\"default\"]=f.exports}}]);","extractedComments":[]}