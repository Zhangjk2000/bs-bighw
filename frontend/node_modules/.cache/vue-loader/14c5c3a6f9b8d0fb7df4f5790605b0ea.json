{"remainingRequest":"F:\\BS\\annotate-system-3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\BS\\annotate-system-3\\frontend\\src\\views\\entityAnnotate\\components\\annotateContent\\AnnotateContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\BS\\annotate-system-3\\frontend\\src\\views\\entityAnnotate\\components\\annotateContent\\AnnotateContent.vue","mtime":1639627257292},{"path":"F:\\BS\\annotate-system-3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639628022585},{"path":"F:\\BS\\annotate-system-3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1639628024341},{"path":"F:\\BS\\annotate-system-3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639628022585},{"path":"F:\\BS\\annotate-system-3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1639628023030}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVHJhbnNsYXRlQ2FyZCBmcm9tICIuL2NvbXBvbmVudHMvVHJhbnNsYXRlQ2FyZCI7DQoNCmltcG9ydCB7DQogIGVudGl0eUFubm90YXRlVXRpbCwNCiAgcmVsYXRpb25Bbm5vdGF0ZVV0aWwsDQogIHJlbGF0aW9uTWF0Y2hpbmdVdGlsLA0KfSBmcm9tICJAL3V0aWxzL2Fubm90YXRlVXRpbHMiOw0KaW1wb3J0IHsgdHJhbnNsYXRlQXBpIH0gZnJvbSAiQC9hcGkvYW5ub3RhdGVEYXRhIjsNCg0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJFc3NheXMiLA0KICBjb21wb25lbnRzOiB7DQogICAgVHJhbnNsYXRlQ2FyZCwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvd0Z1bmN0aW9uRGlhbG9nOiBmYWxzZSwNCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLCAvL+aYvuekuuagh+azqOWvueivneahhg0KICAgICAgc2VsZWN0VGV4dDogIiIsIC8vIOmAieS4reaWh+acrA0KICAgICAgc2hvd1RyYW5zbGF0ZUNhcmQ6IGZhbHNlLCAvL+aYvuekuue/u+ivkeWNoeeJhw0KICAgICAgdHJhbnNsYXRlUmVzdWx0OiB7fSwgLy/nv7vor5Hnu5PmnpwNCiAgICAgIGZsYWc6IGZhbHNlLCAvLyDmoIforrDkuIrkuIDmrKHpgInmi6nnmoTmmK/lrp7kvZPmoIfms6jov5jmmK/lhbPns7vmoIfms6gNCiAgICAgIHBvc2l0aW9uMTogW1tdLCBbXV0sIC8vIOWFs+ezu+agh+azqOeahOesrOS4gOauteaWh+acrOS9jee9rg0KICAgICAgcG9zaXRpb24yOiBbW10sIFtdXSwgLy8g5YWz57O75qCH5rOo55qE56ys5LqM5q615paH5pys5L2N572uDQogICAgICBpZDogWzAsIDBdLCAvLyDpgInkuK3mlofmnKznmoRpZOWAvA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImxhYmVscyJdKSwgLy8g5qCH562+DQogIH0sDQogIC8vIOmUruebmOagh+azqO+8jOWIneWni+WMluWNs+W8gOWni+ebkeWQrA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuYW5ub3RhdGVCeVNob3J0Y3V0KCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiAg5Zyo6byg5qCH5L2N572u5by55Ye65a+56K+d5qGGDQogICAgICogQHBhcmFtIHtudW1iZXJ9IFggIHjovbTlnZDmoIcNCiAgICAgKiBAcGFyYW0ge251bWJlcn0gWSAgeei9tOWdkOaghw0KICAgICAqLw0KICAgIHNldEJveFBvc2l0aW9uKFgsIFkpIHsNCiAgICAgIHRoaXMuJHJlZnMuc2hvd0RpYWxvZy5zdHlsZS5sZWZ0ID0gYCR7WCAtIDEwMH1weGA7DQogICAgICB0aGlzLiRyZWZzLnNob3dEaWFsb2cuc3R5bGUudG9wID0gYCR7WSArIDIwfXB4YDsNCiAgICAgIHRoaXMuJHJlZnMuc2hvd0Z1bmN0aW9uRGlhbG9nLnN0eWxlLmxlZnQgPSBgJHtYIC0gMTAwfXB4YDsNCiAgICAgIHRoaXMuJHJlZnMuc2hvd0Z1bmN0aW9uRGlhbG9nLnN0eWxlLnRvcCA9IGAke1kgKyAyMH1weGA7DQogICAgICB0aGlzLiRyZWZzLnRyYW5zbGF0ZUNhcmQuc3R5bGUubGVmdCA9IGAke1ggKyAxMH1weGA7DQogICAgICB0aGlzLiRyZWZzLnRyYW5zbGF0ZUNhcmQuc3R5bGUudG9wID0gYCR7WSArIDEwfXB4YDsNCiAgICB9LA0KDQogICAgLyoqDQogICAgICogIOiOt+WPlumAieS4reaWh+acrO+8jOm8oOagh+S9jee9ruWKoOS4iua7muWKqOi3neemuw0KICAgICAqIEBwYXJhbSBlICDmtY/op4jlmajkuovku7YNCiAgICAgKi8NCg0KICAgIGdldFNlbGVjdGlvbihlKSB7DQogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkgIT09ICIiKSB7DQogICAgICAgIGlmICghdGhpcy5mbGFnKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RUZXh0ID0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7DQogICAgICAgICAgdGhpcy5zZXRCb3hQb3NpdGlvbihlLnBhZ2VYLCBlLnBhZ2VZKTsNCg0KICAgICAgICAgIC8vdGhpcy4kcmVmcy5zaG93RGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgIC8vdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQ0KICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuc2hvd0Z1bmN0aW9uRGlhbG9nID0gdHJ1ZTsNCiAgICAgICAgICAvLyB0aGlzLnBvc2l0aW9uMVswXSA9IGUucGFnZVg7DQogICAgICAgICAgLy8gdGhpcy5wb3NpdGlvbjFbMV0gPSBlLnBhZ2VZOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOiLpeS4iuasoemAieaLqeeahOaYr+WFs+ezu+agh+azqO+8jOWImeebtOaOpeagh+azqOW5tuS8oOWbnuS4pOasoeagh+azqOaWh+acrOeahOS9jee9rg0KICAgICAgICAgIHRoaXMucG9zaXRpb24yWzBdID0gd2luZG93DQogICAgICAgICAgICAuZ2V0U2VsZWN0aW9uKCkNCiAgICAgICAgICAgIC5nZXRSYW5nZUF0KDApDQogICAgICAgICAgICAuZ2V0Q2xpZW50UmVjdHMoKVsiMCJdLng7DQogICAgICAgICAgdGhpcy5wb3NpdGlvbjJbMV0gPSB3aW5kb3cNCiAgICAgICAgICAgIC5nZXRTZWxlY3Rpb24oKQ0KICAgICAgICAgICAgLmdldFJhbmdlQXQoMCkNCiAgICAgICAgICAgIC5nZXRDbGllbnRSZWN0cygpWyIwIl0ueTsNCiAgICAgICAgICAvLyB0aGlzLnBvc2l0aW9uMlswXSA9IGUucGFnZVg7DQogICAgICAgICAgLy8gdGhpcy5wb3NpdGlvbjJbMV0gPSBlLnBhZ2VZOw0KICAgICAgICAgIHJlbGF0aW9uQW5ub3RhdGVVdGlsKHRoaXMuaWQsIDEpOw0KICAgICAgICAgIHRoaXMuaWRbMV0rKzsNCiAgICAgICAgICByZWxhdGlvbk1hdGNoaW5nVXRpbCh0aGlzLnBvc2l0aW9uMSwgdGhpcy5wb3NpdGlvbjIsIHRoaXMuaWQpOw0KICAgICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9DQogICAgICAvL+eCueWHu+epuueZveWkhOWPlua2iOagh+azqA0KICAgICAgZWxzZSB7DQogICAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOw0KICAgICAgICAvLyDlvpfliqDkuIvpnaLov5nlj6XmiY3og73orqnmoIfms6jlr7nor53moYbmtojlpLHvvIzkuI3muIXmpZrkuLrku4DkuYgNCiAgICAgICAgdGhpcy4kcmVmcy5zaG93RGlhbG9nLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCiAgICAgICAgdGhpcy5zaG93RnVuY3Rpb25EaWFsb2cgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLyoqDQogICAgICogIOmAieaLqeWunuS9k+agh+azqA0KICAgICAqLw0KICAgIGNob29zZUVudGl0eUFubm90YXRlKCkgew0KICAgICAgdGhpcy5zaG93RnVuY3Rpb25EaWFsb2cgPSBmYWxzZTsNCiAgICAgIHRoaXMuJHJlZnMuc2hvd0RpYWxvZy5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7DQogICAgfSwNCg0KICAgIC8qKg0KICAgICAqICDpgInmi6nlhbPns7vmoIfms6gNCiAgICAgKi8NCiAgICBjaG9vc2VSZWxhdGlvbkFubm90YXRlKCkgew0KICAgICAgdGhpcy5zaG93RnVuY3Rpb25EaWFsb2cgPSBmYWxzZTsNCiAgICAgIHRoaXMucG9zaXRpb24xWzBdID0gd2luZG93LmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCkuZ2V0Q2xpZW50UmVjdHMoKVsNCiAgICAgICAgIjAiDQogICAgICBdLng7DQogICAgICB0aGlzLnBvc2l0aW9uMVsxXSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLmdldENsaWVudFJlY3RzKClbDQogICAgICAgICIwIg0KICAgICAgXS55Ow0KICAgICAgLy9jb25zb2xlLmxvZyh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKS5nZXRDbGllbnRSZWN0cygpKTsNCiAgICAgIHJlbGF0aW9uQW5ub3RhdGVVdGlsKHRoaXMuaWQsIDApOw0KICAgICAgdGhpcy5pZFswXSsrOw0KDQogICAgICAvLyDkuIvkuIDmrKHpgInkuK3liKvnmoTmlofmnKzml7bnm7TmjqXmoIfms6jvvIzkuI3nlKjot7Plh7rlip/og73pgInmi6nmoYYNCiAgICAgIHRoaXMuZmxhZyA9IHRydWU7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmZsYWcpOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiAg6YCJ5oup5bGe5oCn5qCH5rOoDQogICAgICovDQogICAgY2hvb3NlQXR0cmlidXRlQW5ub3RhdGUoKSB7DQogICAgICAvLyBUT0RPDQogICAgfSwNCg0KICAgIC8qKg0KICAgICAqICDmoIfms6jmlofmnKwNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgIOe7mWJ1dHRvbuagh+etvueahGlk77yM55So5LqO5Yig6Zmk5pe25p+l5om+DQogICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IOagh+azqOminOiJsue0ouW8lQ0KICAgICAqLw0KICAgIGFubm90YXRlVGV4dChpZCwgaW5kZXgpIHsNCiAgICAgIC8vIOmakOiXj+Wvueivneahhg0KICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7DQogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2hvd0RpYWxvZyk7DQogICAgICBlbnRpdHlBbm5vdGF0ZVV0aWwoaWQsIGluZGV4KTsNCiAgICB9LA0KDQogICAgLyoqDQogICAgICogIOW/q+aNt+mUruagh+azqA0KICAgICAqLw0KICAgIGFubm90YXRlQnlTaG9ydGN1dCgpIHsNCiAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9ICgkZXZlbnQpID0+IHsNCiAgICAgICAgbGV0IGtleSA9ICRldmVudC5rZXk7DQogICAgICAgIGxldCBpZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmFubm90YXRlLmlkOw0KICAgICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZTsNCiAgICAgICAgbGV0IGogPSAwOw0KICAgICAgICBmb3IgKDsgaiA8IHRoaXMubGFiZWxzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5sYWJlbHNbal0uc2hvcnRjdXQpIHsNCiAgICAgICAgICAgIGVudGl0eUFubm90YXRlVXRpbChqICsgIi0iICsgaWQsIGopOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9Ow0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiAg57+76K+RDQogICAgICovDQogICAgdHJhbnNsYXRlVGV4dCgpIHsNCiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOw0KICAgICAgbGV0IHRleHQgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKTsNCiAgICAgIC8vIOiwg+eUqOe/u+ivkWFwaQ0KICAgICAgdHJhbnNsYXRlQXBpKHRleHQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLnRyYW5zbGF0ZVJlc3VsdCA9IHJlcy5kYXRhOw0KICAgICAgICB0aGlzLnNob3dUcmFuc2xhdGVDYXJkID0gdHJ1ZTsNCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["AnnotateContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AnnotateContent.vue","sourceRoot":"src/views/entityAnnotate/components/annotateContent","sourcesContent":["<template>\r\n  <div id=\"paper\">\r\n    <!-- TODO 有空把这里的bootstrap换成原生css -->\r\n    <link\r\n      rel=\"stylesheet\"\r\n      href=\"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css\"\r\n      integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"\r\n      crossorigin=\"anonymous\"\r\n    />\r\n    <!-- 选择实体标注还是关系标注 -->\r\n    <div\r\n      v-show=\"showFunctionDialog\"\r\n      ref=\"showFunctionDialog\"\r\n      class=\"optionDialog\"\r\n    >\r\n      <button @click=\"chooseEntityAnnotate\">\r\n        实体标注\r\n      </button>\r\n      <button @click=\"chooseRelationAnnotate\">\r\n        关系标注\r\n      </button>\r\n      <button @click=\"chooseAttributeAnnotate\">\r\n        属性标注\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 标注选项对话框 -->\r\n    <div v-show=\"showDialog\" ref=\"showDialog\" class=\"optionDialog\">\r\n      <button\r\n        v-for=\"(info, index) in labels\"\r\n        :key=\"index\"\r\n        :style=\"{ backgroundColor: info.color }\"\r\n        @click=\"annotateText(index + '-' + $store.state.annotate.id, index)\"\r\n      >\r\n        {{ info.text }}({{ info.shortcut }})\r\n      </button>\r\n      <!-- 翻译按钮 -->\r\n      <button @click=\"translateText\">\r\n        翻译\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 翻译结果显示 -->\r\n    <div v-show=\"showTranslateCard\" ref=\"translateCard\" class=\"translate-card\">\r\n      <i\r\n        class=\"el-message__closeBtn el-icon-close delete-button\"\r\n        @click=\"showTranslateCard = false\"\r\n      />\r\n      <TranslateCard :data=\"translateResult\" />\r\n    </div>\r\n\r\n    <!-- 定义一个容器 -->\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <!-- 侧边栏 -->\r\n        <div class=\"col-md-2\">\r\n          <div class=\"panel panel-default\">\r\n            <div class=\"panel-heading\">\r\n              <div class=\"head\">\r\n                现有标签\r\n              </div>\r\n              <hr />\r\n              <div class=\"tip\">\r\n                (选中文本后单击任一标签即可标注)\r\n              </div>\r\n            </div>\r\n            <div class=\"panel-body\">\r\n              <div class=\"side\">\r\n                <button\r\n                  v-for=\"(info, index) in labels\"\r\n                  :key=\"index\"\r\n                  :style=\"{ backgroundColor: info.color }\"\r\n                  @click=\"\r\n                    annotateText(index + '-' + $store.state.annotate.id, index)\r\n                  \"\r\n                >\r\n                  {{ info.text }}({{ info.shortcut }})\r\n                </button>\r\n                <br /><br />\r\n                <router-link to=\"/labelsManage\">\r\n                  添加新标签\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 论文排版 -->\r\n        <div class=\"col-md-10\">\r\n          <div class=\"panel panel-default\">\r\n            <div class=\"panel-heading\">\r\n              <div class=\"head\">\r\n                文章如下\r\n              </div>\r\n            </div>\r\n            <div id=\"panel-body\" class=\"panel-body\">\r\n              <pre\r\n                id=\"annotateContent\"\r\n                class=\"annotate-content\"\r\n                :style=\"'font-size:' + $store.state.annotate.fontSize + 'px'\"\r\n                @mouseup=\"getSelection($event)\"\r\n                v-text=\"$store.state.annotate.annotateText\"\r\n              ></pre>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TranslateCard from \"./components/TranslateCard\";\r\n\r\nimport {\r\n  entityAnnotateUtil,\r\n  relationAnnotateUtil,\r\n  relationMatchingUtil,\r\n} from \"@/utils/annotateUtils\";\r\nimport { translateApi } from \"@/api/annotateData\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"Essays\",\r\n  components: {\r\n    TranslateCard,\r\n  },\r\n  data() {\r\n    return {\r\n      showFunctionDialog: false,\r\n      showDialog: false, //显示标注对话框\r\n      selectText: \"\", // 选中文本\r\n      showTranslateCard: false, //显示翻译卡片\r\n      translateResult: {}, //翻译结果\r\n      flag: false, // 标记上一次选择的是实体标注还是关系标注\r\n      position1: [[], []], // 关系标注的第一段文本位置\r\n      position2: [[], []], // 关系标注的第二段文本位置\r\n      id: [0, 0], // 选中文本的id值\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"labels\"]), // 标签\r\n  },\r\n  // 键盘标注，初始化即开始监听\r\n  created() {\r\n    this.annotateByShortcut();\r\n  },\r\n  methods: {\r\n    /**\r\n     *  在鼠标位置弹出对话框\r\n     * @param {number} X  x轴坐标\r\n     * @param {number} Y  y轴坐标\r\n     */\r\n    setBoxPosition(X, Y) {\r\n      this.$refs.showDialog.style.left = `${X - 100}px`;\r\n      this.$refs.showDialog.style.top = `${Y + 20}px`;\r\n      this.$refs.showFunctionDialog.style.left = `${X - 100}px`;\r\n      this.$refs.showFunctionDialog.style.top = `${Y + 20}px`;\r\n      this.$refs.translateCard.style.left = `${X + 10}px`;\r\n      this.$refs.translateCard.style.top = `${Y + 10}px`;\r\n    },\r\n\r\n    /**\r\n     *  获取选中文本，鼠标位置加上滚动距离\r\n     * @param e  浏览器事件\r\n     */\r\n\r\n    getSelection(e) {\r\n      if (window.getSelection().toString() !== \"\") {\r\n        if (!this.flag) {\r\n          this.selectText = window.getSelection().toString();\r\n          this.setBoxPosition(e.pageX, e.pageY);\r\n\r\n          //this.$refs.showDialog.style.display = \"block\";\r\n          //this.showDialog = true\r\n          this.showDialog = false;\r\n          this.showFunctionDialog = true;\r\n          // this.position1[0] = e.pageX;\r\n          // this.position1[1] = e.pageY;\r\n        } else {\r\n          // 若上次选择的是关系标注，则直接标注并传回两次标注文本的位置\r\n          this.position2[0] = window\r\n            .getSelection()\r\n            .getRangeAt(0)\r\n            .getClientRects()[\"0\"].x;\r\n          this.position2[1] = window\r\n            .getSelection()\r\n            .getRangeAt(0)\r\n            .getClientRects()[\"0\"].y;\r\n          // this.position2[0] = e.pageX;\r\n          // this.position2[1] = e.pageY;\r\n          relationAnnotateUtil(this.id, 1);\r\n          this.id[1]++;\r\n          relationMatchingUtil(this.position1, this.position2, this.id);\r\n          this.flag = false;\r\n        }\r\n      }\r\n      //点击空白处取消标注\r\n      else {\r\n        this.showDialog = false;\r\n        // 得加下面这句才能让标注对话框消失，不清楚为什么\r\n        this.$refs.showDialog.style.display = \"none\";\r\n\r\n        this.showFunctionDialog = false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     *  选择实体标注\r\n     */\r\n    chooseEntityAnnotate() {\r\n      this.showFunctionDialog = false;\r\n      this.$refs.showDialog.style.display = \"block\";\r\n      this.showDialog = true;\r\n    },\r\n\r\n    /**\r\n     *  选择关系标注\r\n     */\r\n    chooseRelationAnnotate() {\r\n      this.showFunctionDialog = false;\r\n      this.position1[0] = window.getSelection().getRangeAt(0).getClientRects()[\r\n        \"0\"\r\n      ].x;\r\n      this.position1[1] = window.getSelection().getRangeAt(0).getClientRects()[\r\n        \"0\"\r\n      ].y;\r\n      //console.log(window.getSelection().getRangeAt(0).getClientRects());\r\n      relationAnnotateUtil(this.id, 0);\r\n      this.id[0]++;\r\n\r\n      // 下一次选中别的文本时直接标注，不用跳出功能选择框\r\n      this.flag = true;\r\n      console.log(this.flag);\r\n    },\r\n\r\n    /**\r\n     *  选择属性标注\r\n     */\r\n    chooseAttributeAnnotate() {\r\n      // TODO\r\n    },\r\n\r\n    /**\r\n     *  标注文本\r\n     * @param {string} id  给button标签的id，用于删除时查找\r\n     * @param {number} index 标注颜色索引\r\n     */\r\n    annotateText(id, index) {\r\n      // 隐藏对话框\r\n      this.showDialog = false;\r\n      //console.log(this.showDialog);\r\n      entityAnnotateUtil(id, index);\r\n    },\r\n\r\n    /**\r\n     *  快捷键标注\r\n     */\r\n    annotateByShortcut() {\r\n      document.onkeydown = ($event) => {\r\n        let key = $event.key;\r\n        let id = this.$store.state.annotate.id;\r\n        this.showDialog = false;\r\n        let j = 0;\r\n        for (; j < this.labels.length; j++) {\r\n          if (key === this.labels[j].shortcut) {\r\n            entityAnnotateUtil(j + \"-\" + id, j);\r\n            break;\r\n          }\r\n        }\r\n      };\r\n    },\r\n\r\n    /**\r\n     *  翻译\r\n     */\r\n    translateText() {\r\n      this.showDialog = false;\r\n      let text = window.getSelection().toString();\r\n      // 调用翻译api\r\n      translateApi(text).then((res) => {\r\n        this.translateResult = res.data;\r\n        this.showTranslateCard = true;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/* 因为是有固定定位，所以要有margin-top */\r\n#paper {\r\n  margin-top: 48.8px;\r\n\r\n  /* 标注时对话框的样式 */\r\n  .optionDialog {\r\n    position: absolute;\r\n    border-radius: 10px;\r\n    background-color: rgb(147, 121, 121);\r\n    padding: 5px;\r\n    z-index: 10; /* 设置堆叠次序，防止被覆盖 */\r\n\r\n    button {\r\n      border: 1px solid black;\r\n      margin-left: 10px;\r\n      border-radius: 10px;\r\n      cursor: pointer;\r\n      outline: none;\r\n      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2),\r\n        0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n    }\r\n  }\r\n\r\n  .head {\r\n    font-size: 15px;\r\n    color: white;\r\n  }\r\n\r\n  .tip {\r\n    font-size: 10px;\r\n    color: white;\r\n  }\r\n\r\n  /* 面板框样式 */\r\n  .panel > .panel-heading {\r\n    background-image: none;\r\n    background-color: #7b8ca3;\r\n    color: white;\r\n    font-weight: 400;\r\n  }\r\n\r\n  /* 侧边栏样式 */\r\n  .side {\r\n    button {\r\n      border: 1px solid black;\r\n      margin-top: 10px;\r\n      margin-left: 10px;\r\n      border-radius: 10px;\r\n      cursor: pointer;\r\n      outline: none;\r\n      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2),\r\n        0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n    }\r\n  }\r\n\r\n  /* 文本样式 */\r\n  .annotate-content {\r\n    margin-top: 50px;\r\n    overflow: auto;\r\n    flex: auto;\r\n    min-height: 1000px;\r\n    padding: 0 5% 0 5%;\r\n    white-space: pre-line;\r\n    word-break: break-all;\r\n    line-height: 25px;\r\n    font-family: Microsoft Yahei, serif;\r\n  }\r\n  // 翻译卡片\r\n  .translate-card {\r\n    width: 200px;\r\n    position: absolute;\r\n    z-index: 1;\r\n\r\n    .delete-button {\r\n      top: 10px;\r\n      right: -40px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}