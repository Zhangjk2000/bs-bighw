(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7920a417"],{"11e8":function(t,e,s){"use strict";s("2792")},2792:function(t,e,s){},a434:function(t,e,s){"use strict";var i=s("23e7"),a=s("da84"),n=s("23cb"),o=s("5926"),r=s("07fa"),l=s("7b0b"),c=s("65f0"),d=s("8418"),u=s("1dde"),h=u("splice"),f=a.TypeError,m=Math.max,p=Math.min,b=9007199254740991,k="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var s,i,a,u,h,g,v=l(this),w=r(v),L=n(t,w),y=arguments.length;if(0===y?s=i=0:1===y?(s=0,i=w-L):(s=y-2,i=p(m(o(e),0),w-L)),w+s-i>b)throw f(k);for(a=c(v,i),u=0;u<i;u++)h=L+u,h in v&&d(a,u,v[h]);if(a.length=i,s<i){for(u=L;u<w-i;u++)h=u+i,g=u+s,h in v?v[g]=v[h]:delete v[g];for(u=w;u>w-i+s;u--)delete v[u-1]}else if(s>i)for(u=w-i;u>L;u--)h=u+i-1,g=u+s-1,h in v?v[g]=v[h]:delete v[g];for(u=0;u<s;u++)v[u+L]=arguments[u+2];return v.length=w-i+s,a}})},c09b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"button-group"},[s("div",{staticClass:"button-group-item"},[s("el-button",{attrs:{type:"primary"},on:{click:t.taskCreate}},[t._v(" 创建任务 ")])],1)]),s("div",{staticClass:"search"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请搜索关键词"},on:{input:t.search},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[s("el-select",{attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchTarget,callback:function(e){t.searchTarget=e},expression:"searchTarget"}},[s("el-option",{attrs:{label:"描述",value:"description"}}),s("el-option",{attrs:{label:"状态",value:"status"}}),s("el-option",{attrs:{label:"任务",value:"name"}})],1),s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.filterList,"element-loading-text":"Loading","row-class-name":t.tableRowClassName,border:"",fit:""}},[s("el-table-column",{attrs:{align:"center",label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),s("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"single-line"},[t._v(" "+t._s(e.row.description)+" ")])]}}])}),s("el-table-column",{attrs:{label:"任务名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"single-line"},[t._v(" "+t._s(e.row.name)+" ")])]}}])}),s("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(" "+t._s(e.row.status)+" ")])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"210",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.receiveTask(e.$index)}}},[t._v(" 领取 ")]),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){return t.handleEdit(e.$index,e.row)}}},[t._v(" 编辑 ")]),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return t.handleDelete(e.$index)}}},[t._v(" 删除 ")])]}}])})],1)],1),s("el-dialog",{attrs:{visible:t.showTaskForm,width:t.width},on:{"update:visible":function(e){t.showTaskForm=e}}},[s("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.taskform}},[s("el-form-item",{attrs:{label:"任务名称"}},[s("el-input",{model:{value:t.taskform.name,callback:function(e){t.$set(t.taskform,"name",e)},expression:"taskform.name"}})],1),s("div",[t._v("请选择组成任务的图片")]),s("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.taskimgList,(function(e,i){return s("el-checkbox",{key:i,attrs:{label:e.img.split("/").pop()}},[t._v(" "+t._s(e.img.split("/").pop())+" "),s("div",[s("img",{staticClass:"img",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.img,alt:""},on:{click:t.selectImg}})])])})),1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.handleSuccess}},[t._v(" 创建 ")])],1)],1),s("el-dialog",{attrs:{visible:t.showEditForm,width:t.width},on:{"update:visible":function(e){t.showEditForm=e}}},[s("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.form}},[s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{model:{value:t.taskform.description,callback:function(e){t.$set(t.taskform,"description",e)},expression:"taskform.description"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.update()}}},[t._v(" 更新 ")])],1)],1)],1)},a=[],n=s("5530"),o=(s("b0c0"),s("a4d3"),s("e01a"),s("498a"),s("4de4"),s("d3b7"),s("caad"),s("2532"),s("159b"),s("a434"),s("278e")),r=s("5f87"),l=s("2f62"),c={name:"taskList",filters:{statusFilter:function(t){var e={"已领取":"success","未领取":"gray","已完成":"done"};return e[t]}},data:function(){return{checkList:[],searchTarget:"描述",showTaskForm:!1,keywords:"",filterList:[],taskimgList:[],list:[],listLoading:!0,showEditForm:!1,listEditIndex:0,handleItemId:0,taskform:{name:"",status:"未领取",imgs:[],description:"无"}}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({width:function(){return window.innerWidth<=400?"80%":"30%"},token:function(){return Object(r["a"])()}},Object(l["b"])(["taskList"])),Object(l["b"])(["imgList"])),Object(l["b"])(["receivetaskList"])),mounted:function(){this.list=this.filterList=this.taskList,this.taskimgList=this.imgList,this.listLoading=!1},methods:{selectImg:function(){console.log(this.checkList)},taskCreate:function(){this.showTaskForm=!0},handleSuccess:function(){console.log(this.checkList),this.taskform.imgs=this.checkList,this.filterList.push(this.taskform),this.$message.success("任务创建成功"),console.log("%s",this.taskform.name),Object(o["d"])({name:this.taskform.name,status:this.taskform.status,imgs:this.taskform.imgs,description:this.taskform.description}),this.showTaskForm=!1},handleError:function(){this.$message.error("上传失败")},search:function(){var t=this,e=this.keywords.trim();"描述"==this.searchTarget?this.filterList=this.list.filter((function(t){return t.description.includes(e)})):this.filterList=this.list.filter((function(s){return s[t.searchTarget].includes(e)}))},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2?"highlight-row":""},receiveTask:function(t){var e=this;this.filterList[t].status="已领取",this.$store.dispatch("user/addReceiveTaskList",this.filterList[t]),Object(o["h"])(this.filterList[t]).then((function(t){console.log(t.data["flag"]),t.data["flag"]&&e.$message.success("领取成功")}))},handleEdit:function(t,e){this.showEditForm=!0,this.listEditIndex=t,this.taskform.description=e.description,this.taskform.name=e.name,this.handleItemId=e.id},update:function(){var t=this;this.filterList[this.listEditIndex].description=this.taskform.description,Object(o["j"])(this.filterList[this.listEditIndex]),this.list.forEach((function(e){e.id===t.handleItemId&&(e.description=t.taskform.description)})),this.showEditForm=!1},handleDelete:function(t){var e=this.filterList[t].name;Object(o["f"])(e),this.filterList.splice(t,1);for(var s=0;s<this.list.length;s++)this.list[s].name==e&&(this.list.splice(s,1),this.$store.dispatch("user/setTaskList",this.list))}}},d=c,u=(s("11e8"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);e["default"]=h.exports},e01a:function(t,e,s){"use strict";var i=s("23e7"),a=s("83ab"),n=s("da84"),o=s("e330"),r=s("1a2d"),l=s("1626"),c=s("3a9b"),d=s("577e"),u=s("9bf2").f,h=s("e893"),f=n.Symbol,m=f&&f.prototype;if(a&&l(f)&&(!("description"in m)||void 0!==f().description)){var p={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=c(m,this)?new f(t):void 0===t?f():f(t);return""===t&&(p[e]=!0),e};h(b,f),b.prototype=m,m.constructor=b;var k="Symbol(test)"==String(f("test")),g=o(m.toString),v=o(m.valueOf),w=/^Symbol\((.*)\)[^)]+$/,L=o("".replace),y=o("".slice);u(m,"description",{configurable:!0,get:function(){var t=v(this),e=g(t);if(r(p,t))return"";var s=k?y(e,7,-1):L(e,w,"$1");return""===s?void 0:s}}),i({global:!0,forced:!0},{Symbol:b})}}}]);